<div class="container" dir="rtl" >
  <div class="dashboard">
    <!-- Main content area -->
    <section class="content card">
      
      <!-- Overview Tab Content -->
      <div *ngIf="currentTab === 'overview'" class="overview-container">
        <div class="overview-header">
          <h2>ูุธุฑุฉ ุนุงูุฉ ุนูู ุงููุธุงู</h2>
          <button class="refresh-btn" (click)="refreshDashboard()" [disabled]="loading">
            <span class="refresh-icon">โป</span>
            ุชุญุฏูุซ ุงูุจูุงูุงุช
          </button>
        </div>

        <!-- Loading State -->
        <div *ngIf="loading" class="loading-state">
          <div class="spinner"></div>
          <p>ุฌุงุฑู ุชุญููู ุงูุจูุงูุงุช...</p>
        </div>

        <!-- Error State -->
        <div *ngIf="error && !loading" class="error-state">
          <div class="error-icon">โ</div>
          <p>{{ error }}</p>
          <button class="retry-btn" (click)="refreshDashboard()">ุฅุนุงุฏุฉ ุงููุญุงููุฉ</button>
        </div>

        <!-- Dashboard Content -->
        <div *ngIf="stats && !loading" class="dashboard-content">
          
          <!-- Statistics Cards -->
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-icon competition">
                <span class="icon">๐</span>
              </div>
              <div class="stat-info">
                <h3>{{ stats.totalCompetitions }}</h3>
                <p>ุฅุฌูุงูู ุงููุณุงุจูุงุช</p>
              </div>
            </div>

            <div class="stat-card">
              <div class="stat-icon active">
                <span class="icon">๐</span>
              </div>
              <div class="stat-info">
                <h3>{{ stats.activeCompetitions }}</h3>
                <p>ูุณุงุจูุงุช ูุดุทุฉ</p>
              </div>
            </div>

            <div class="stat-card">
              <div class="stat-icon participants">
                <span class="icon">๐ฅ</span>
              </div>
              <div class="stat-info">
                <h3>{{ stats.totalParticipants }}</h3>
                <p>ุฅุฌูุงูู ุงููุชุณุงุจููู</p>
              </div>
            </div>

            <div class="stat-card">
              <div class="stat-icon jury">
                <span class="icon">โ๏ธ</span>
              </div>
              <div class="stat-info">
                <h3>{{ stats.totalJuryMembers }}</h3>
                <p>ุฃุนุถุงุก ูุฌูุฉ ุงูุชุญููู</p>
              </div>
            </div>
          </div>

          <!-- Evaluation Progress -->
          <div class="progress-section">
            <div class="progress-card">
              <h3>ุชูุฏู ุงูุชููููุงุช</h3>
              <div class="progress-stats">
                <div class="progress-item completed">
                  <span class="progress-label">ููุชูู</span>
                  <span class="progress-value">{{ stats.completedEvaluations }}</span>
                  <div class="progress-bar">
                    <div class="progress-fill" [style.width.%]="getCompletionPercentage()"></div>
                  </div>
                </div>
                <div class="progress-item pending">
                  <span class="progress-label">ูุนูู</span>
                  <span class="progress-value">{{ stats.pendingEvaluations }}</span>
                  <div class="progress-bar">
                    <div class="progress-fill" [style.width.%]="getPendingPercentage()"></div>
                  </div>
                </div>
              </div>
              <div class="total-evaluations">
                ุฅุฌูุงูู ุงูุชููููุงุช: {{ stats.completedEvaluations + stats.pendingEvaluations }}
              </div>
            </div>

            <div class="competition-progress">
              <h3>ุชูุฏู ุงููุณุงุจูุงุช</h3>
              <div class="competition-list">
                <div *ngFor="let comp of stats.competitionProgress" class="competition-item">
                  <div class="comp-name">{{ comp.competitionTitle }}</div>
                  <div class="comp-progress">
                    <div class="progress-bar">
                      <div class="progress-fill" [style.width.%]="comp.progressPercentage"></div>
                    </div>
                    <span class="progress-percent">{{ comp.progressPercentage }}%</span>
                  </div>
                  <div class="comp-stats">
                    {{ comp.evaluatedParticipants }}/{{ comp.totalParticipants }}
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Quick Actions -->
          <div class="quick-actions">
            <h3>ุฑูุงุจุท ุณุฑูุนุฉ</h3>
            <div class="actions-grid">
              <button class="action-btn" (click)="selectTab('competitions')">
                <span class="action-icon">โ</span>
                <span class="action-text">ุฅุฏุงุฑุฉ ุงููุณุงุจูุงุช</span>
              </button>
              <button class="action-btn" (click)="selectTab('participants')">
                <span class="action-icon">๐ค</span>
                <span class="action-text">ุฅุถุงูุฉ ูุชุณุงุจููู</span>
              </button>
              <button class="action-btn" (click)="selectTab('users')">
                <span class="action-icon">๐จโโ๏ธ</span>
                <span class="action-text">ุฅุฏุงุฑุฉ ุงููุญูููู</span>
              </button>
              <button class="action-btn" (click)="selectTab('participations')">
                <span class="action-icon">๐</span>
                <span class="action-text">ุฅุฏุงุฑุฉ ุงููุดุงุฑูุงุช</span>
              </button>
              <button class="action-btn" (click)="selectTab('categories')">
                <span class="action-icon">๐</span>
                <span class="action-text">ุงููุฆุงุช</span>
              </button>
              <button class="action-btn" (click)="selectTab('branches')">
                <span class="action-icon">๐ข</span>
                <span class="action-text">ุงููุฑูุน</span>
              </button>
            </div>
          </div>

          

          <!-- Recent Activities -->
          <div class="recent-activities">
            <h3>ุขุฎุฑ ุงููุดุงุทุงุช</h3>
            <div class="activities-list">
              <div *ngFor="let activity of stats.recentActivities" class="activity-item">
                <div class="activity-icon">
                  <span>๐</span>
                </div>
                <div class="activity-details">
                  <p class="activity-action">{{ activity.action }}</p>
                  <p class="activity-meta">
                    ุจูุงุณุทุฉ {{ activity.user }} โข {{ activity.competition }}
                  </p>
                </div>
                <div class="activity-time">
                  {{ activity.timestamp | date:'short' }}
                </div>
              </div>
              
              <div *ngIf="stats.recentActivities.length === 0" class="no-activities">
                <p>ูุง ุชูุฌุฏ ูุดุงุทุงุช ุญุฏูุซุฉ</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Other Tabs Content -->
      <app-admin-user *ngIf="currentTab === 'users'"></app-admin-user>
      <app-admin-add *ngIf="currentTab === 'participants'"></app-admin-add>
      <app-admin-competition *ngIf="currentTab === 'competitions'"></app-admin-competition>
      <app-admin-participation *ngIf="currentTab === 'participations'"></app-admin-participation>
      <app-admin-category *ngIf="currentTab === 'categories'"></app-admin-category>
      <app-branch-management *ngIf="currentTab === 'branches'"></app-branch-management>
      <app-age-group *ngIf="currentTab === 'age-groups'"></app-age-group>
      <app-jury-dashboard *ngIf="currentTab === 'jury'"></app-jury-dashboard>

    </section>
    
    <!-- Right-side Tabs -->
    <aside class="sidebar card">
      <h3 class="sidebar-title">ููุญุฉ ุงููุณุคูู</h3>
      <nav class="tabs">
        <button
          *ngFor="let t of tabs"
          class="tab-btn"
          [class.active]="currentTab === t.id"
          (click)="selectTab(t.id)"
        >
          {{ t.label }}
        </button>
      </nav>
    </aside>
  </div>
</div>