<div class="container" dir="rtl">
	<div class="card">
		<h2>{{ editId ? 'ุชุนุฏูู ุนุถู ุงููุฌูุฉ' : 'ุฅุถุงูุฉ ุนุถู ูุฌูุฉ' }}</h2>

		<form [formGroup]="userForm" (ngSubmit)="submit()">
			<div class="form-row">
				<div class="form-group">
					<label>ุงูุงุณู ุงูุฃูู</label>
					<input type="text" formControlName="firstName" />
				</div>
				<div class="form-group">
					<label>ุงูููุจ</label>
					<input type="text" formControlName="lastName" />
				</div>
			</div>

			<div class="form-row">
				<div class="form-group">
					<label>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
					<input type="email" formControlName="email" />
				</div>
				<div class="form-group">
					<label>ุงูุฏูุฑ</label>
					<select formControlName="role">
						<option value="jury">ุนุถู ูุฌูุฉ</option>
						<option value="admin">ูุดุฑู</option>
					</select>
				</div>
			</div>

			<div class="form-row">
				<div class="form-group">
					<label>ุฑุดุญ ุฑุฆูุณูุง</label>
					<input type="checkbox" formControlName="canBePresident" />
				</div>
				<div class="form-group">
					<label>ูุณุชูู ุงูุฎุจุฑุฉ (1-10)</label>
					<input type="number" formControlName="expertiseLevel" min="1" max="10" />
				</div>
			</div>

			<div class="form-buttons">
				<button class="btn primary" type="submit">{{ editId ? 'ุชุญุฏูุซ' : 'ุฅุถุงูุฉ' }}</button>
				<button class="btn secondary" type="button" (click)="cancelEdit()" *ngIf="editId">ุฅูุบุงุก</button>
			</div>
		</form>
	</div>

	


<div class="card table-card">
  <h2>ุฃุนุถุงุก ุงููุฌูุฉ</h2>

  <!-- โ Filters -->
  <div class="filters">
    <input type="text" placeholder="ุจุญุซ ุจุงูุงุณู ุฃู ุงูุจุฑูุฏ..." [(ngModel)]="filters.query" (ngModelChange)="applyFilters()" />
    
	<select [(ngModel)]="filters.role" (ngModelChange)="applyFilters()" >
      <option value="">ูู ุงูุฃุฏูุงุฑ</option>
      <option value="jury">ุนุถู ูุฌูุฉ</option>
      <option value="admin">ูุดุฑู</option>
    </select>

	<select [(ngModel)]="filters.canBePresident" (ngModelChange)="applyFilters()">
  		<option value="">ุงููู</option>
  		<option value="true">ูุฑุดุญ ุฑุฆูุณูุง</option>
  		<option value="false">ุบูุฑ ูุฑุดุญ</option>
	</select>

    <button class="btn small secondary" (click)="resetFilters()">ุฅุนุงุฏุฉ ุชุนููู</button>
	<button class="btn small primary" (click)="printTable()">๐จ๏ธ ุทุจุงุนุฉ</button>
  </div>

  <div class="table-wrapper">
    <table>
      <thead>
        <tr>
          <th>ุงูุงุณู</th>
          <th>ุงูุจุฑูุฏ</th>
          <th>ุงูุฏูุฑ</th>
          <th>ูุฑุดุญ ุฑุฆูุณูุง</th>
          <th>ุงูุฎุจุฑุฉ</th>
          <th>ุงูุฅุฌุฑุงุกุงุช</th>
        </tr>
      </thead>
      <tbody>
        <!-- โ use filteredUsers instead of users -->
        <tr *ngFor="let u of filteredUsers">
          <td>{{ u.firstName }} {{ u.lastName }}</td>
          <td>{{ u.email }}</td>
          <td>{{ u.role }}</td>
          <td>{{ u.canBePresident ? 'ูุนู' : 'ูุง' }}</td>
          <td>{{ u.expertiseLevel || '-' }}</td>
          <td>
            <button class="btn small primary" (click)="edit(u)">ุชุนุฏูู</button>
            <button class="btn small danger" (click)="delete(u._id)">ุญุฐู</button>
          </td>
        </tr>
        <tr *ngIf="filteredUsers.length === 0">
          <td colspan="6" style="text-align:center">ูุง ุชูุฌุฏ ุจูุงูุงุช</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
</div>
